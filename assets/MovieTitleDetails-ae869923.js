import{r as l,h as J,j as e,_ as p}from"./index-9063daab.js";import{D as A,p as P}from"./DetailsPageFallback-98e6aba2.js";import{m as r}from"./motion-bbc167dd.js";const $=l.lazy(()=>p(()=>import("./Review-4551f8ee.js"),["assets/Review-4551f8ee.js","assets/index-9063daab.js","assets/index-283280f8.css"])),G=l.lazy(()=>p(()=>import("./Recommendation-137bc0ef.js"),["assets/Recommendation-137bc0ef.js","assets/index-9063daab.js","assets/index-283280f8.css"])),V=l.lazy(()=>p(()=>import("./SimilarTitle-fdb01295.js"),["assets/SimilarTitle-fdb01295.js","assets/index-9063daab.js","assets/index-283280f8.css"])),Z=l.lazy(()=>p(()=>import("./CastMember-4a4ebd3a.js"),["assets/CastMember-4a4ebd3a.js","assets/index-9063daab.js","assets/index-283280f8.css"]));function Q(){const[a,_]=l.useState(null),[c,j]=l.useState(null),[h,b]=l.useState(!1),[d,y]=l.useState(null),[f,N]=l.useState(null),[S,w]=l.useState(void 0),[m,T]=l.useState(null),{titleId:o}=J(),D=new AbortController,n={method:"GET",headers:{accept:"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiJmMDI1NDQ5NTNmYWM2YzU0M2RkZGZlYTNmNWZmMTU5OCIsInN1YiI6IjY0OGIzOTQ0NDJiZjAxMDBlNDljZjVmOSIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.iUW3GfRNm04SDxrpeOst_ngTbcCXzp0Dmo93b5F325Q"}};async function C(){const s=await(await fetch(`https://api.themoviedb.org/3/movie/${o}?append_to_response=videos`,n)).json();s&&_(s)}async function k(){const s=await(await fetch(`https://api.themoviedb.org/3/movie/${o}/reviews`,n)).json();s&&j(s)}async function R(){const s=await(await fetch(`https://api.themoviedb.org/3/movie/${o}/recommendations`,n)).json();s&&y(s.results)}async function E(){const s=await(await fetch(`https://api.themoviedb.org/3/movie/${o}/similar`,n)).json();s&&N(s)}async function M(){const s=await(await fetch(`https://api.themoviedb.org/3/movie/${o}/credits?language=en-US`,n)).json();s.cast.filter(u=>u.known_for_department==="Acting"),T(s)}l.useEffect(()=>(C(),k(),R(),E(),M(),()=>{D.abort()}),[o]),l.useEffect(()=>{var i,s;(i=a==null?void 0:a.videos)!=null&&i.results&&w((s=a.videos.results[0])==null?void 0:s.key)},[a==null?void 0:a.videos.results]);function O(){return new Promise(i=>{setTimeout(i,2e3)})}const z={initial:{opacity:0,translateY:-20},animate:{opacity:1,translateY:0},exit:{opacity:0,translateY:-20},transition:{type:"spring",duration:3,ease:"easeIn"}},g={initial:{y:"-10rem",opacity:0},animate:{y:0,opacity:1,transition:{staggerChildren:.15,ease:"easeInOut",duration:1}}},x={initial:{x:"-10rem",opacity:0},animate:{x:0,opacity:1,transition:{staggerChildren:.15,ease:"easeInOut",duration:1}}},I=()=>{var i,s,u,v;return e.jsxs(r.div,{variants:g,initial:"initial",animate:"animate",className:"mx-auto mt-20 flex h-auto w-[calc(100%-10%)] flex-col overflow-x-hidden pt-2 md:h-auto md:pb-4 xl:w-full xl:flex-row",children:[e.jsxs("div",{className:"mx-auto hidden h-64 w-full px-4 lg:mt-10 lg:h-[1000px] xl:block xl:w-[500px]",children:[e.jsx("p",{className:"mb-4 text-lg text-teal-500",children:"Recommendations"}),e.jsx("ul",{className:"h-full overflow-y-scroll pr-3",children:d==null?void 0:d.map(t=>e.jsx(r.div,{variants:g,children:e.jsx(G,{backdrop_path:t.backdrop_path,name:"",vote_average:t.vote_average,first_air_date:t.first_air_date,adult:!1,genre_ids:[],id:t.id,origin_country:[],original_language:"",original_name:"",overview:"",popularity:0,poster_path:"",show_vote_average:"",vote_count:0,title:t.title,isShow:!1})},t.id))})]}),e.jsxs("div",{className:"mb-2 flex h-auto w-full flex-col xl:w-[900px] 2xl:w-[1200px]",children:[e.jsx("p",{className:"mx-auto w-full text-left text-lg text-teal-400 md:text-xl xl:w-full",children:a==null?void 0:a.title}),e.jsx("iframe",{className:"mx-auto h-60 w-full rounded-xl sm:h-80 md:h-96 lg:h-[550px] lg:w-full xl:w-[900px] 2xl:w-[1200px]",src:`https://www.youtube.com/embed/${S}`||"",title:"YouTube video player",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",allowFullScreen:!0}),e.jsxs(r.div,{className:"mx-auto h-auto w-full",children:[e.jsx(r.div,{id:"videos",variants:x,initial:"initial",animate:"animate",className:"mt-2 flex h-32 w-full items-center justify-start overflow-x-scroll md:h-40",children:(i=a==null?void 0:a.videos)!=null&&i.results?a.videos.results.map(t=>e.jsx(r.div,{variants:x,children:e.jsxs("div",{className:"relative mr-2 h-auto w-40 flex-shrink-0 md:w-52",children:[e.jsx("img",{src:`http://img.youtube.com/vi/${t.key}/default.jpg`,alt:"YouTube video thumbnail",className:"h-28 w-full rounded-lg md:h-36"}),e.jsx("button",{onClick:()=>w(t.key),className:"absolute left-[37%] top-[30%] h-auto w-auto bg-gray-800 p-2 md:left-[40%] md:top-[35%]",children:e.jsx("img",{src:P,alt:"play",className:"w-6"})})]})},t.id)):e.jsx("p",{children:"This title has no videos"})}),e.jsxs("ul",{id:"genres",className:"mx-auto -mt-1 mb-1 flex w-full items-center py-2 xl:w-full",children:[e.jsxs("p",{className:"mr-2 pl-0 text-base text-gray-500 md:pr-4 md:text-base",children:["Genres:"," "]}),e.jsx("ul",{id:"genres",className:"my-1 flex overflow-x-scroll",children:(s=a==null?void 0:a.genres)==null?void 0:s.map(t=>e.jsx("div",{className:"mr-1 whitespace-nowrap p-2 pb-1.5 pl-0 text-sm font-extrabold text-gray-300 md:pr-6 md:text-base",children:t.name},t.id))})]}),e.jsxs("div",{className:"mx-auto mb-3 w-full text-left text-teal-400 xl:w-full",children:[e.jsxs("div",{className:"-mt-2 mb-2 flex w-full items-center justify-center",children:[e.jsx("p",{className:"mr-2 whitespace-nowrap text-sm md:text-base",children:"Release date:"}),e.jsx("h3",{className:"mt-0.5 w-full text-left text-xs font-bold text-gray-500 md:text-base",children:a==null?void 0:a.release_date})]}),e.jsx("h3",{className:"mb-0.5 mt-3 text-sm font-bold md:text-base",children:"Summary"}),e.jsx("h3",{className:"w-full border-b-[1px] border-gray-700 pb-2 text-justify text-sm text-gray-500 sm:text-sm md:text-base",children:a==null?void 0:a.overview})]})]}),e.jsx("h4",{className:"my-4 text-left font-bold text-teal-500",children:"Cast members"}),e.jsx(r.ul,{id:"cast",variants:x,initial:"initial",animate:"animate",className:"mb-2 flex h-auto w-full overflow-x-scroll",children:(u=m==null?void 0:m.cast)==null?void 0:u.map(t=>e.jsx(r.div,{variants:x,children:e.jsx(Z,{adult:!1,gender:0,id:0,known_for_department:"",name:t.name,original_name:"",popularity:0,profile_path:t.profile_path,cast_id:0,character:t.character,credit_id:"",order:0})},t.id))}),e.jsxs("div",{className:"z-20 mb-2 h-auto w-full",children:[e.jsxs("div",{className:"my-2 flex w-full items-center justify-between",children:[e.jsx("p",{className:"py-text-left text-base text-teal-500 lg:text-base",children:"Reviews"}),e.jsx("button",{style:{border:"none",outline:"none"},onClick:()=>b(!h),className:"bg-transparent p-2 py-1 text-sm text-gray-400",children:h?"Hide Comments":"Show Comments"})]}),e.jsx("ul",{className:`${h?"flex":"hidden"} h-auto w-full list-none flex-col items-center`,children:(v=c==null?void 0:c.results)==null?void 0:v.map(t=>e.jsx($,{author:t.author,username:t.author_details.username,rating:t.author_details.rating,content:t.content,avatar_path:t.author_details.avatar_path,updated_at:t.updated_at,name:"",created_at:"",id:"",url:""},t.id))})]})]}),e.jsxs("div",{className:"h-84 mx-auto w-full pb-4 xl:mt-10 xl:h-[1000px] xl:w-[500px] xl:px-4",children:[e.jsx("p",{className:"mb-4 text-left text-sm text-teal-500 lg:text-lg xl:text-center",children:"Similar Titles"}),e.jsx("ul",{id:"similar",className:"grid h-auto grid-flow-col gap-6 overflow-x-scroll pb-4 xl:h-full xl:grid-flow-row xl:grid-cols-1 xl:gap-3 xl:gap-y-5 xl:overflow-hidden xl:overflow-y-scroll 2xl:grid-cols-2",children:f==null?void 0:f.results.map(t=>e.jsx(V,{adult:!1,backdrop_path:"",first_air_date:"",genre_ids:[],id:t.id,name:"",origin_country:[],original_language:"",original_name:"",overview:"",popularity:0,poster_path:t.poster_path,vote_average:t.vote_average,show_vote_average:"",vote_count:0,title:t.title,isShow:!1},t.id))})]})]})},Y=()=>{if(!a||!c||!d||!m)throw O();return e.jsx(I,{})};return e.jsx(e.Fragment,{children:e.jsx(r.div,{variants:z,initial:"initial",animate:"animate",exit:"exit",transition:{delay:.5,duration:1},className:"h-auto w-full bg-neutral-900",children:e.jsx(l.Suspense,{fallback:e.jsx(A,{}),children:e.jsx(Y,{})})})})}export{Q as default};
