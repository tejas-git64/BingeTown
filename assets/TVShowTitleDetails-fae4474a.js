import{r as l,h as P,j as t,_ as d}from"./index-9063daab.js";import{D as V,p as $}from"./DetailsPageFallback-98e6aba2.js";import{m as i}from"./motion-bbc167dd.js";const G=l.lazy(()=>d(()=>import("./Review-4551f8ee.js"),["assets/Review-4551f8ee.js","assets/index-9063daab.js","assets/index-283280f8.css"])),Z=l.lazy(()=>d(()=>import("./Recommendation-137bc0ef.js"),["assets/Recommendation-137bc0ef.js","assets/index-9063daab.js","assets/index-283280f8.css"])),L=l.lazy(()=>d(()=>import("./SimilarTitle-fdb01295.js"),["assets/SimilarTitle-fdb01295.js","assets/index-9063daab.js","assets/index-283280f8.css"])),M=l.lazy(()=>d(()=>import("./Season-6cc6830b.js"),["assets/Season-6cc6830b.js","assets/index-9063daab.js","assets/index-283280f8.css"])),W=l.lazy(()=>d(()=>import("./CastMember-4a4ebd3a.js"),["assets/CastMember-4a4ebd3a.js","assets/index-9063daab.js","assets/index-283280f8.css"]));function B(){const[a,j]=l.useState(null),[c,b]=l.useState(null),[h,y]=l.useState(!1),[x,N]=l.useState(null),[f,S]=l.useState(null),[T,v]=l.useState(void 0),[u,D]=l.useState(null),{titleId:r}=P(),C=new AbortController,m={method:"GET",headers:{accept:"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiJmMDI1NDQ5NTNmYWM2YzU0M2RkZGZlYTNmNWZmMTU5OCIsInN1YiI6IjY0OGIzOTQ0NDJiZjAxMDBlNDljZjVmOSIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.iUW3GfRNm04SDxrpeOst_ngTbcCXzp0Dmo93b5F325Q"}};async function k(){const s=await(await fetch(`https://api.themoviedb.org/3/tv/${r}?append_to_response=videos`,m)).json();s&&j(s)}async function E(){const s=await(await fetch(`https://api.themoviedb.org/3/tv/${r}/reviews`,m)).json();s&&b(s)}async function R(){const s=await(await fetch(`https://api.themoviedb.org/3/tv/${r}/recommendations`,m)).json();s&&N(s)}async function O(){const s=await(await fetch(`https://api.themoviedb.org/3/tv/${r}/similar`,m)).json();s&&S(s)}async function z(){const s=await(await fetch(`https://api.themoviedb.org/3/tv/${r}/credits?language=en-US`,m)).json();s.cast.filter(p=>p.known_for_department==="Acting"),D(s)}l.useEffect(()=>(k(),E(),O(),R(),z(),()=>{C.abort()}),[r]),l.useEffect(()=>{var n,s;(n=a==null?void 0:a.videos)!=null&&n.results&&v((s=a.videos.results[0])==null?void 0:s.key)},[a==null?void 0:a.videos.results]);function Y(){return new Promise(n=>{setTimeout(n,2e3)})}const I={initial:{opacity:0,translateY:-20},animate:{opacity:1,translateY:0},exit:{opacity:0,translateY:-20},transition:{type:"spring",duration:3,ease:"easeIn"}},_={initial:{y:"-10rem",opacity:0},animate:{y:0,opacity:1,transition:{staggerChildren:.15,ease:"easeInOut",duration:1}}},o={initial:{x:"-10rem",opacity:0},animate:{x:0,opacity:1,transition:{staggerChildren:.15,ease:"easeInOut",duration:1}}},J=()=>{var n,s,p,w,g;return t.jsxs(i.div,{className:"mx-auto mt-20 flex h-auto w-[calc(100%-10%)] flex-col overflow-x-hidden overflow-y-hidden pt-2 md:h-auto md:pb-4 xl:w-full xl:flex-row",children:[t.jsxs("div",{className:"mx-auto hidden h-64 w-full px-4 lg:mt-10 lg:h-[1000px] xl:block xl:w-[500px]",children:[t.jsx("p",{className:"mb-4 text-lg text-teal-500",children:"Recommendations"}),t.jsx(i.ul,{variants:_,initial:"initial",animate:"animate",className:"h-full overflow-y-scroll pr-3",children:(n=x==null?void 0:x.results)==null?void 0:n.map(e=>t.jsx(i.div,{variants:_,children:t.jsx(Z,{backdrop_path:e.backdrop_path,name:e.name,vote_average:e.vote_average,first_air_date:e.first_air_date,adult:!1,genre_ids:[],id:e.id,origin_country:[],original_language:"",original_name:"",overview:"",popularity:0,poster_path:"",show_vote_average:"",vote_count:0,title:"",isShow:!0})},e.id))})]}),t.jsxs("div",{className:"mb-2 flex h-auto w-full flex-col xl:w-[900px] 2xl:w-[1200px]",children:[t.jsx("p",{className:"mx-auto mb-2 w-full text-left text-lg text-teal-400 md:text-xl xl:w-full",children:a==null?void 0:a.name}),t.jsx("iframe",{className:"mx-auto h-60 w-full rounded-xl sm:h-80 md:h-96 lg:h-[550px] lg:w-full xl:w-[900px] 2xl:w-[1200px]",src:`https://www.youtube.com/embed/${T}`||"",title:"YouTube video player",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",allowFullScreen:!0}),t.jsxs(i.div,{className:"mx-auto mb-2 mt-4 h-auto w-full",children:[t.jsx(i.div,{id:"videos",variants:o,initial:"initial",animate:"animate",className:"flex h-24 w-full items-center justify-start overflow-x-scroll md:h-40",children:(s=a==null?void 0:a.videos)!=null&&s.results?a.videos.results.map(e=>t.jsx(i.div,{variants:o,children:t.jsxs("div",{className:"relative mr-2 h-auto w-40 flex-shrink-0 md:w-52",children:[t.jsx("img",{src:`http://img.youtube.com/vi/${e.key}/default.jpg`,alt:"YouTube video thumbnail",className:"h-28 w-full rounded-lg md:h-32"}),t.jsx("button",{onClick:()=>v(e.key),className:"absolute left-[37%] top-[30%] h-auto w-auto bg-gray-800 p-2 md:left-[40%] md:top-[35%]",children:t.jsx("img",{src:$,alt:"play",className:"w-6"})})]})},e.id)):t.jsx("p",{children:"This title has no videos"})}),t.jsxs("ul",{className:"mx-auto -mt-2 flex w-full items-center py-2 xl:w-full",children:[t.jsxs("p",{className:"mr-2 pl-0 text-sm text-gray-500 md:pr-4 md:text-base",children:["Genres:"," "]}),t.jsx("ul",{id:"genres",className:"my-1 flex overflow-x-scroll",children:(p=a==null?void 0:a.genres)==null?void 0:p.map(e=>t.jsx("div",{className:"mr-1 whitespace-nowrap p-2 pl-0 text-sm font-extrabold text-gray-300 md:pr-6 md:text-base",children:e.name},e.id))})]}),t.jsxs("div",{className:"mx-auto mb-3 w-full text-left text-teal-400 xl:w-full",children:[t.jsxs("div",{className:"-mt-2 mb-2 flex w-full items-center justify-center",children:[t.jsx("p",{className:"mr-2 whitespace-nowrap text-sm md:text-base",children:"Release date:"}),t.jsx("h3",{className:"-mb-1 w-full text-left text-xs font-bold text-gray-500 sm:-mb-0.5 md:text-base",children:a==null?void 0:a.first_air_date})]}),t.jsx("h3",{className:"mb-0.5 mt-3 text-sm font-bold md:text-base",children:"Summary"}),t.jsx("h3",{className:"w-full text-justify text-sm text-gray-500 sm:text-sm md:text-base",children:a==null?void 0:a.overview})]}),t.jsx("p",{className:"mb-2 w-full text-left text-sm text-teal-400 xl:text-base",children:"Seasons"}),t.jsx(i.div,{id:"seasons",variants:o,initial:"initial",animate:"animate",className:"flex h-auto w-full items-center justify-start overflow-x-scroll pb-4",children:a!=null&&a.seasons?a.seasons.map(e=>t.jsx(i.div,{variants:o,children:t.jsx(M,{poster_path:e.poster_path,name:e.name,episode_count:e.episode_count,id:0},e.id)},e.id)):t.jsx("p",{children:"This series has no upcoming seasons"})})]}),t.jsx("h4",{className:"mb-2 text-left font-bold text-teal-500",children:"Cast members"}),t.jsx(i.ul,{id:"cast",variants:o,initial:"initial",animate:"animate",className:"mb-2 flex h-auto w-full overflow-x-scroll pb-4",children:(w=u==null?void 0:u.cast)==null?void 0:w.map(e=>t.jsx(i.div,{variants:o,children:t.jsx(W,{adult:!1,gender:0,id:0,known_for_department:"",name:e.name,original_name:"",popularity:0,profile_path:e.profile_path,cast_id:0,character:e.character,credit_id:"",order:0})},e.id))}),t.jsxs("div",{className:"h-auto w-full",children:[t.jsxs("div",{className:"my-2 flex w-full items-center justify-between",children:[t.jsx("p",{className:"py-text-left text-base text-teal-500 lg:text-base",children:"Reviews"}),t.jsx("button",{style:{border:"none",outline:"none"},onClick:()=>y(!h),className:"bg-transparent p-2 py-1 text-sm text-gray-400",children:h?"Hide Comments":"Show Comments"})]}),t.jsx(i.ul,{className:`${h?"flex":"hidden"} w-full list-none flex-col items-center`,children:c!=null&&c.results?c.results.map(e=>t.jsx(G,{author:e.author,username:e.author_details.username,rating:e.author_details.rating,content:e.content,avatar_path:e.author_details.avatar_path,updated_at:e.updated_at,name:"",created_at:"",id:"",url:""},e.id)):t.jsx("p",{children:"No Comments"})})]})]}),t.jsxs("div",{className:"h-84 mx-auto w-full pb-4 xl:mt-10 xl:h-[1000px] xl:w-[500px] xl:px-4",children:[t.jsx("p",{className:"mb-4 text-left text-sm text-teal-500 lg:text-lg xl:text-center",children:"Similar Titles"}),t.jsx(i.ul,{id:"similar",initial:"initial",animate:"animate",className:"grid h-auto grid-flow-col gap-6 overflow-x-scroll pb-4 xl:h-full xl:grid-flow-row xl:grid-cols-1 xl:gap-3 xl:gap-y-5 xl:overflow-x-hidden xl:overflow-y-scroll 2xl:grid-cols-2",children:(g=f==null?void 0:f.results)==null?void 0:g.map(e=>t.jsx(L,{adult:!1,backdrop_path:"",first_air_date:"",genre_ids:[],id:e.id,name:e.name,origin_country:[],original_language:"",original_name:"",overview:"",popularity:0,poster_path:e.poster_path,vote_average:e.vote_average,show_vote_average:"",vote_count:0,title:"",isShow:!0},e.id))})]})]})},A=()=>{if(!a||!c||!x||!u)throw Y();return t.jsx(J,{})};return t.jsx(t.Fragment,{children:t.jsx(i.div,{variants:I,initial:"initial",animate:"animate",exit:"exit",transition:{delay:.5,duration:1},className:"h-auto w-full bg-neutral-900",children:t.jsx(l.Suspense,{fallback:t.jsx(V,{}),children:t.jsx(A,{})})})})}export{B as default};
