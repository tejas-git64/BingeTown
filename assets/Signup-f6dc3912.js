import{r as l,u as I,j as e,L as w,c as U,a as o,o as y,m as x,d as i,e as d,f as F,b as P,g as q}from"./index-9063daab.js";import{NameContext as A}from"./Layout-f9530c97.js";import{g as C}from"./icons8-google-48-27bc51e0.js";import{m as D}from"./motion-bbc167dd.js";import"./icons8-list-50-96a5d3c6.js";function $(){const[r,j]=l.useState(""),[s,N]=l.useState(""),[c,g]=l.useState(""),[v,E]=l.useState(!1),[u,f]=l.useState(!1),n=l.useContext(A),p=I();function b(t){switch(!0){case t.code==="auth/invalid-email":return"Invalid email format";case t.code==="auth/user-disabled":return"User account is disabled";case t.code==="auth/internal-error":return"Internal Error occured, try again later";case t.code==="auth/email-already-exists":return"User already exists";case t.code==="auth/wrong-password":return"Entered wrong password";default:return"Unknown error occurred"}}const m=l.useCallback(()=>{r.length===0||s.length===0||(n==null?void 0:n.name[0].length)===0?f(!0):f(!1)},[n==null?void 0:n.name,r.length,s.length]);function k(t){t.preventDefault(),u===!1?(async()=>{try{await U(o,r,s),y(o,a=>{(async()=>{if(a){await x(i(d,"users",a.uid),{email:r.toString(),fullname:n==null?void 0:n.name[0].toString(),uid:a.uid}),await x(i(d,"saved",a.uid),{savedtitles:[],uid:a.uid}),await x(i(d,"watchlist",a.uid),{uid:a.uid,watchlist:[]});const h=i(d,"users",a.uid);(await F(h)).exists()?(E(!0),setTimeout(()=>{p("/home")},2e3)):window.alert("Unknown error occured, try again?")}})()})}catch(a){const h=b(a);g(h),console.error(c)}})():m()}const S=async()=>{try{await P(o,q),y(o,t=>{if(t)try{p("/home")}catch(a){window.alert(`Error:${a}, Failed to login in`)}})}catch(t){const a=b(t);g(a)}};l.useEffect(()=>{m()},[r.length,m,s.length]);const z={initial:{opacity:0,translateY:-20},animate:{opacity:1,translateY:0},exit:{opacity:0,translateY:-20},transition:{type:"spring",duration:3,ease:"easeIn"}};return e.jsx(e.Fragment,{children:e.jsxs(D.div,{variants:z,initial:"initial",animate:"animate",exit:"exit",transition:{duration:1,delay:.5},className:"grid h-[calc(100dvh-0dvh)] w-full place-items-center bg-neutral-800 p-4",children:[e.jsx(w,{to:"/",className:"absolute right-5 top-5 h-14 w-auto font-bold text-zinc-500 hover:text-teal-400",children:"‚¨Ö Back to site"}),e.jsxs("form",{className:"mt-10 flex h-[700px] w-full flex-col items-start justify-center rounded-xl bg-zinc-900 p-4 px-6 shadow-xl md:w-[450px] md:px-10",children:[e.jsx("h2",{className:"mb-14 w-full whitespace-nowrap text-2xl font-extrabold text-teal-700",children:"Create an account"}),e.jsx("label",{htmlFor:"fullname",className:"text-left font-bold text-gray-600",children:"Full name"}),e.jsx("input",{type:"text",name:"fullname",onChange:t=>n==null?void 0:n.name[1](t.target.value),placeholder:"Enter your full name",className:"mb-6 h-12 w-full rounded-lg border-none bg-neutral-700 px-3 font-bold text-zinc-300 outline-none placeholder:text-gray-400",required:!0}),e.jsx("label",{htmlFor:"email",className:"text-left font-bold text-gray-600",children:"Email"}),e.jsx("input",{type:"email",name:"email",onChange:t=>j(t.target.value),placeholder:"Enter email address",className:"mb-6 h-12 w-full rounded-lg border-none bg-neutral-700 px-3 font-bold text-zinc-300 outline-none placeholder:text-gray-400",required:!0}),e.jsx("label",{htmlFor:"password",className:"text-left font-bold text-gray-600",children:"Password"}),e.jsx("input",{type:"password",name:"password",onChange:t=>N(t.target.value),placeholder:"Enter your password",className:"mb-4 h-12 w-full rounded-lg border-none bg-neutral-700 px-3 font-bold text-zinc-300 outline-none placeholder:text-gray-400",required:!0}),c&&e.jsx("h4",{className:`mx-auto mt-1 w-full rounded-md text-center font-extrabold
							 text-red-500 md:w-80`,children:c}),v&&e.jsx("h4",{className:"mx-auto mt-2 w-full rounded-md bg-green-500 py-2 text-center font-extrabold text-black md:w-80",children:"Signed up successfully!"}),e.jsx("button",{onClick:k,type:"submit",disabled:u,className:`${u?"cursor-not-allowed bg-neutral-800 text-gray-500 brightness-50":"bg-black text-gray-200"} mx-auto mt-4 h-14 w-full border-none font-bold tracking-wider outline-none md:w-80`,children:"Start Binging üéâüçø"}),e.jsx(w,{to:"/login",className:"mx-auto my-4 w-full text-zinc-500 hover:text-teal-400 md:w-80",children:"Have an account ? Login"}),e.jsx("div",{className:"mx-auto mb-8 mt-4 h-[0.5px] w-full border-t-2 border-zinc-700 md:w-80",children:e.jsx("p",{className:"mx-auto -mt-[15px] h-10 w-12 bg-zinc-900 text-sm",children:"or"})}),e.jsxs("button",{onClick:S,type:"button",className:"mx-auto mb-4 flex h-12 w-full items-center justify-center border-none bg-white font-bold outline-none md:w-80",children:[" ",e.jsx("p",{className:"mr-4 text-base font-semibold text-gray-500",children:"Sign in with Google"}),e.jsx("img",{src:C,alt:"google",className:"h-8 w-8"})]})]})]})})}export{$ as default};
